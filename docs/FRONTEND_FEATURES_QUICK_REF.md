# 前端功能快速参考

## 🎨 Artifact 功能（代码/文档编辑）

### 如何触发

**创建文档**:
```
"帮我写一篇关于人工智能的文章"
"写一个 Python 函数计算斐波那契数列"
"创建一个包含销售数据的电子表格"
```

**更新文档**:
```
"优化这篇文章的段落结构"
"修改代码，添加错误处理"
"在电子表格中添加一列"
```

### 支持的文档类型

- 📝 **文本** (text) - Markdown 支持
- 💻 **代码** (code) - Python 等编程语言
- 📊 **电子表格** (sheet) - CSV 格式
- 🖼️ **图片** (image) - 图片编辑

### 界面位置

- **左侧**: 对话消息
- **右侧**: Artifact 面板（文档编辑器）

---

## 🌤️ 天气查询工具

### 如何使用

```
"旧金山的天气怎么样？"
"北京现在的温度是多少？"
"查询坐标 37.7749, -122.4194 的天气"
```

### 显示内容

- 当前温度
- 每小时温度预测
- 日出/日落时间
- 时区信息

### 显示位置

在 AI 回复消息中显示为可折叠的天气卡片。

---

## 👍 消息投票功能

### 如何操作

1. **点赞**: 鼠标悬停在 AI 回复上 → 点击 👍 图标
2. **点踩**: 鼠标悬停在 AI 回复上 → 点击 👎 图标

### 投票状态

- ✅ **已点赞**: 点赞按钮禁用，可切换为点踩
- ❌ **已点踩**: 点踩按钮禁用，可切换为点赞
- ⚪ **未投票**: 两个按钮都可用

### 权限

- 只有聊天所有者可以投票
- 需要登录用户身份

---

## 📋 完整使用示例

### 示例 1: 创建代码文档

```
用户: "写一个 Python 函数计算阶乘"

AI: 
→ 调用 createDocument 工具
→ 右侧打开代码编辑器
→ 实时显示生成的代码
→ 可以编辑和保存代码
```

### 示例 2: 查询天气

```
用户: "北京现在的天气怎么样？"

AI:
→ 调用 getWeather 工具
→ 在消息中显示天气卡片
→ 包含温度、日出日落等信息
```

### 示例 3: 投票反馈

```
用户: "解释一下什么是机器学习"

AI: [回复内容...]
    [👍] [👎] [📋]  ← 消息操作按钮

用户: 点击 👍 点赞
→ 投票保存到数据库
→ 按钮状态更新
```

---

## 🔧 技术细节

### Artifact 功能

- **自动保存**: 2秒防抖自动保存
- **版本历史**: 支持查看文档历史版本
- **实时编辑**: 支持在线编辑文档内容

### 工具调用

- **异步执行**: 工具调用是异步的
- **流式显示**: 结果实时流式显示
- **外部 API**: 天气工具使用 Open-Meteo API

### 投票功能

- **持久化**: 投票保存在数据库中
- **唯一性**: 每个消息只能有一个投票状态
- **乐观更新**: UI 立即更新，无需等待服务器响应

---

## 📁 相关文件

- **Artifact**: `components/artifact.tsx`
- **天气工具**: `lib/ai/tools/get-weather.ts`, `components/weather.tsx`
- **投票**: `components/message-actions.tsx`, `app/(chat)/api/vote/route.ts`

详细文档请参考: `FRONTEND_FEATURES.md`

